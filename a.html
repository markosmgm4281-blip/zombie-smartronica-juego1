<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Zombi - Smartronica M&M</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      background: #0b0f13;
      color: white;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }

    #ui {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 10;
    }

    button {
      background: red;
      color: white;
      border: none;
      padding: 10px;
      margin-top: 5px;
      border-radius: 6px;
      font-size: 16px;
    }

    #whatsapp {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background: #25D366;
      padding: 12px;
      border-radius: 10px;
      font-weight: bold;
    }

    canvas {
      display: block;
    }
  </style>
</head>
<body>

<div id="ui">
  <div>NIVEL: <span id="nivel">1</span></div>
  <button onclick="armaPesada()">ðŸ’£ ARMA PESADA</button>
</div>

<a id="whatsapp" href="https://wa.me/541137659959" target="_blank">
  WhatsApp Smartronica M&M
</a>

<canvas id="juego"></canvas>

<script>
const canvas = document.getElementById("juego");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let jugador = { x: 200, y: 200, vida: 100 };
let balas = [];
let zombies = [];
let nivel = 1;
let armaPower = false;

function crearZombie() {
  zombies.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    vida: 30 + nivel * 10
  });
}

function armaPesada() {
  armaPower = true;
  setTimeout(() => armaPower = false, 5000);
}

function disparar(x, y) {
  balas.push({
    x: jugador.x,
    y: jugador.y,
    dx: (x - jugador.x) / 10,
    dy: (y - jugador.y) / 10,
    power: armaPower
  });
}

canvas.addEventListener("touchstart", (e) => {
  const toque = e.touches[0];
  disparar(toque.clientX, toque.clientY);
});

function actualizar() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Jugador
  ctx.fillStyle = "cyan";
  ctx.fillRect(jugador.x, jugador.y, 20, 20);

  // Balas
  balas.forEach((b, i) => {
    b.x += b.dx;
    b.y += b.dy;
    ctx.fillStyle = b.power ? "orange" : "yellow";
    ctx.fillRect(b.x, b.y, 6, 6);

    zombies.forEach((z, zi) => {
      if (
        b.x < z.x + 20 && b.x + 6 > z.x &&
        b.y < z.y + 20 && b.y + 6 > z.y
      ) {
        z.vida -= b.power ? 50 : 20;
        balas.splice(i, 1);
        if (z.vida <= 0) zombies.splice(zi, 1);
      }
    });
  });

  // Zombies
  zombies.forEach(z => {
    const dx = jugador.x - z.x;
    const dy = jugador.y - z.y;
    z.x += dx * 0.01 * nivel;
    z.y += dy * 0.01 * nivel;

    ctx.fillStyle = "green";
    ctx.fillRect(z.x, z.y, 20, 20);
  });

  // Subir nivel
  if (zombies.length === 0) {
    nivel++;
    document.getElementById("nivel").textContent = nivel;
    for (let i = 0; i < nivel * 3; i++) crearZombie();
  }

  requestAnimationFrame(actualizar);
}

for (let i = 0; i < 5; i++) crearZombie();
actualizar();
</script>

</body>
</html>
